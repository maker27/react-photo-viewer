{"version":3,"sources":["components/loader/index.js","components/loader/loader.js","components/photo/photo.js","components/photo/index.js","services/index.js","services/photo-service.js","components/form/form.js","components/form/index.js","components/comment/comment.js","components/comment/index.js","utils/date-format.js","components/close-button/index.js","components/close-button/close-button.js","components/modal-window/modal-window.js","components/modal-window/index.js","components/app/index.js","components/app/app.js","index.js"],"names":["Loader","className","Photo","props","id","url","openPhoto","style","backgroundImage","onClick","photoService","axios","get","name","comment","post","FormInput","label","text","onChangeInput","type","placeholder","value","onChange","Form","state","status","message","e","target","replace","setState","charAt","toUpperCase","slice","toLowerCase","onSubmit","preventDefault","trim","setStatus","addComment","then","updateComments","catch","this","Component","Comment","date","timestamp","d","Date","twoDigit","digit","getDate","getMonth","getFullYear","join","dateFormat","CloseButton","closeModal","ModalWindow","photo","comments","src","alt","length","map","key","App","loading","photoList","openedPhoto","getPhoto","data","closePhoto","getAll","Fragment","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c2d59a15.chunk.js","sourcesContent":["import Loader from './loader';\n\nexport default Loader;\n","import React from 'react';\nimport './loader.css';\n\nconst Loader = () => {\n  return <div className=\"loader\">Идет загрузка...</div>;\n};\n\nexport default Loader;\n","import React from 'react';\nimport './photo.scss';\n\nfunction Photo(props) {\n\tconst {id, url, openPhoto} = props;\n\treturn (\n\t\t<div className=\"photo\"\n\t\t\t style={{backgroundImage: `url(${url})`}}\n\t\t\t onClick={ () => openPhoto(id) }> </div>\n\t);\n}\n\nexport default Photo;\n","import Photo from \"./photo\";\nexport default Photo;","import PhotoService from \"./photo-service\";\n\nconst photoService = new PhotoService();\nexport{\n\tphotoService\n}","import axios from 'axios';\n\nexport default class PhotoService{\n\n\tgetAll(){\n\t\treturn axios.get('https://boiling-refuge-66454.herokuapp.com/images');\n\t}\n\n\tgetPhoto(id){\n\t\treturn axios.get('https://boiling-refuge-66454.herokuapp.com/images/'+id);\n\t}\n\n\taddComment(id, name, comment){\n\t\treturn axios.post(`https://boiling-refuge-66454.herokuapp.com/images/${ id }/comments`,\n\t\t\t{ id, name, comment });\n\t}\n\n}","import React, {Component} from 'react';\nimport './form.scss';\n\nimport {photoService} from \"../../services\";\n\nfunction FormInput(props){\n\tconst {label, text, onChangeInput} = props;\n\treturn (\n\t\t<input type=\"text\" placeholder={label} value={text} onChange={onChangeInput} />\n\t);\n}\n\nclass Form extends Component {\n\tstate = {\n\t\tstatus: 0,\n\t\tname: '',\n\t\tmessage: ''\n\t};\n\n\tonChangeInput = id => e => {\n\t\tconst {value} = e.target;\n\t\tconst text = value.replace(/['\"]|^\\s/, '').replace(/\\s{2,}/, ' ');\n\t\tthis.setState({\n\t\t\t[id]: text.charAt(0).toUpperCase() + text.slice(1).toLowerCase()\n\t\t});\n\t};\n\n\tonSubmit = id => e => {\n\t\te.preventDefault();\n\n\t\tlet {name, message, status} = this.state;\n\n\t\tname = name.trim();\n\t\tmessage = message.trim();\n\t\tif(!name || !message || status){\n\t\t\treturn;\n\t\t}\n\n\t\tconst setStatus = (status) => {\n\t\t\tthis.setState({status});\n\t\t};\n\t\tsetStatus(1);\n\t\tphotoService.addComment(id, name, message)\n\t\t\t.then(({status}) => {\n\t\t\t\tif(status === 204){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tmessage: '',\n\t\t\t\t\t\tstatus: 0\n\t\t\t\t\t});\n\t\t\t\t\tthis.props.updateComments(id);\n\t\t\t\t}else{\n\t\t\t\t\tsetStatus(0);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tsetStatus(0);\n\t\t\t});\n\t};\n\n\trender(){\n\t\tconst {id} = this.props;\n\t\tconst {name, message} = this.state;\n\t\treturn (\n\t\t\t<div className=\"modal-form\">\n\t\t\t\t<form onSubmit={this.onSubmit(id)}>\n\t\t\t\t\t<FormInput label=\"Ваше имя\" text={name} onChangeInput={this.onChangeInput('name')}/>\n\t\t\t\t\t<FormInput label=\"Ваш комментарий\" text={message} onChangeInput={this.onChangeInput('message')}/>\n\t\t\t\t\t<input type=\"submit\" value=\"Оставить комментарий\"/>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Form;\n","import Form from './form';\nexport  default Form;","import React from 'react';\nimport './comment.scss';\nimport {dateFormat} from \"../../utils\";\n\nfunction Comment(props) {\n\tconst {date, text} = props;\n\treturn (\n\t\t<div className=\"comment\">\n\t\t\t<div className=\"comment-date\">\n\t\t\t\t{ dateFormat(date) }\n\t\t\t</div>\n\t\t\t<div className=\"comment-text\">\n\t\t\t\t{ text }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Comment;\n","import Comment from \"./comment\";\nexport default Comment;","export default function dateFormat(timestamp){\n\tconst d = new Date(timestamp);\n\tconst twoDigit = digit => ('0' + digit).slice(-2);\n\treturn [\n\t\ttwoDigit(d.getDate()),\n\t\ttwoDigit(d.getMonth()+1),\n\t\td.getFullYear()\n\t].join('.');\n}","import CloseButton from \"./close-button\";\nexport default CloseButton;","import React from 'react';\nimport './close-button.scss';\n\nconst CloseButton = ({closeModal}) => <div className=\"close-button\" onClick={closeModal}> </div>;\n\nexport default CloseButton;\n","import React from 'react';\nimport './modal-window.scss';\nimport Form from \"../form\";\nimport Comment from \"../comment\";\nimport CloseButton from \"../close-button\";\n\nfunction ModalWindow(props) {\n\tconst {photo: {id, url, comments}, closeModal, updateComments} = props;\n\treturn (\n\t\t<div className=\"modal-window\">\n\t\t\t<div className=\"modal-content\">\n\t\t\t\t<div className=\"modal-image\">\n\t\t\t\t\t<img src={ url } alt={ 'Фото №' + id }/>\n\t\t\t\t</div>\n\t\t\t\t<Form id={id} updateComments={updateComments}/>\n\t\t\t\t<div className=\"modal-comments\">\n\t\t\t\t\t{\n\t\t\t\t\t\tcomments.length\n\t\t\t\t\t\t\t? comments.map(({id, text, date}) => <Comment key={id} text={text} date={date}/>)\n\t\t\t\t\t\t\t: <div>Прокомментируйте первыми!</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<CloseButton closeModal={closeModal} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default ModalWindow;\n","import ModalWindow from './modal-window';\nexport default ModalWindow;","import App from \"./app\";\nexport default App;","import React, {Component} from 'react';\nimport './app.css';\n\nimport Loader from \"../loader\";\nimport Photo from \"../photo\";\nimport {photoService} from \"../../services\";\nimport ModalWindow from \"../modal-window\";\n\nclass App extends Component{\n    state = {\n        loading: true,\n        photoList: [],\n        openedPhoto: null\n    };\n\n    componentDidMount() {\n        photoService.getAll()\n            .then(({data: photoList}) => {\n                this.setState({\n                    loading: false,\n                    photoList\n                });\n            });\n    }\n\n    openPhoto = id => {\n        photoService.getPhoto(id)\n            .then(({data: openedPhoto}) => {\n                this.setState({\n                    openedPhoto\n                });\n            });\n    };\n\n    closePhoto = () => {\n        this.setState({\n            openedPhoto: null\n        });\n    };\n\n    render(){\n        const {loading, photoList, openedPhoto} = this.state;\n        return (\n            <React.Fragment>\n                <header className=\"header\">\n                    Фотоальбом\n                </header>\n                <main className=\"gallery\">\n                    {\n                        loading\n                        ? <Loader/>\n                        : photoList.map(({id, url}) => {\n                            return <Photo key={id} id={id} url={url} openPhoto={this.openPhoto}/>;\n                        })\n                    }\n                </main>\n                <footer className=\"footer\">\n                    &copy; 2020\n                </footer>\n                {\n                    openedPhoto\n                        ? <ModalWindow photo={openedPhoto}\n                                       closeModal={this.closePhoto}\n                                       updateComments={this.openPhoto}/>\n                        : null\n                }\n            </React.Fragment>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}