(this["webpackJsonpfoto-list"]=this["webpackJsonpfoto-list"]||[]).push([[0],{19:function(e,t,n){e.exports=n(49)},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),c=n.n(r),l=(n(24),n(2)),u=n(3),s=n(5),i=n(4),m=n(6),h=(n(25),n(26),function(){return o.a.createElement("div",{className:"loader"},"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")});n(27);var p=function(e){var t=e.id,n=e.url,a=e.openPhoto;return o.a.createElement("div",{className:"photo",style:{backgroundImage:"url(".concat(n,")")},onClick:function(){return a(t)}}," ")},d=n(7),f=n.n(d),v=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getAll",value:function(){return f.a.get("https://boiling-refuge-66454.herokuapp.com/images")}},{key:"getPhoto",value:function(e){return f.a.get("https://boiling-refuge-66454.herokuapp.com/images/"+e)}},{key:"addComment",value:function(e,t,n){return f.a.post("https://boiling-refuge-66454.herokuapp.com/images/".concat(e,"/comments"),{id:e,name:t,comment:n})}}]),e}()),g=(n(45),n(18));n(46);function E(e){var t=e.label,n=e.text,a=e.onChangeInput;return o.a.createElement("input",{type:"text",placeholder:t,value:n,onChange:a})}var b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={status:0,name:"",message:""},n.onChangeInput=function(e){return function(t){var a=t.target.value.replace(/['"]|^\s/,"").replace(/\s{2,}/," ");n.setState(Object(g.a)({},e,a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()))}},n.onSubmit=function(e){return function(t){t.preventDefault();var a=n.state,o=a.name,r=a.message,c=a.status;if(o=o.trim(),r=r.trim(),o&&r&&!c){var l=function(e){n.setState({status:e})};l(1),v.addComment(e,o,r).then((function(t){204===t.status?(n.setState({message:"",status:0}),n.props.updateComments(e)):l(0)})).catch((function(){l(0)}))}}},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.id,t=this.state,n=t.name,a=t.message;return o.a.createElement("div",{className:"modal-form"},o.a.createElement("form",{onSubmit:this.onSubmit(e)},o.a.createElement(E,{label:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",text:n,onChangeInput:this.onChangeInput("name")}),o.a.createElement(E,{label:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",text:a,onChangeInput:this.onChangeInput("message")}),o.a.createElement("input",{type:"submit",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})))}}]),t}(a.Component);n(47);var C=function(e){var t=e.date,n=e.text;return o.a.createElement("div",{className:"comment"},o.a.createElement("div",{className:"comment-date"},function(e){var t=new Date(e),n=function(e){return("0"+e).slice(-2)};return[n(t.getDate()),n(t.getMonth()+1),t.getFullYear()].join(".")}(t)),o.a.createElement("div",{className:"comment-text"},n))},y=(n(48),function(e){var t=e.closeModal;return o.a.createElement("div",{className:"close-button",onClick:t}," ")});var k=function(e){var t=e.photo,n=t.id,a=t.url,r=t.comments,c=e.closeModal,l=e.updateComments;return o.a.createElement("div",{className:"modal-window"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-image"},o.a.createElement("img",{src:a,alt:"\u0424\u043e\u0442\u043e \u2116"+n})),o.a.createElement(b,{id:n,updateComments:l}),o.a.createElement("div",{className:"modal-comments"},r.length?r.map((function(e){var t=e.id,n=e.text,a=e.date;return o.a.createElement(C,{key:t,text:n,date:a})})):o.a.createElement("div",null,"\u041f\u0440\u043e\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c\u0438!")),o.a.createElement(y,{closeModal:c})))},j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0,photoList:[],openedPhoto:null},n.openPhoto=function(e){v.getPhoto(e).then((function(e){var t=e.data;n.setState({openedPhoto:t})}))},n.closePhoto=function(){n.setState({openedPhoto:null})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.getAll().then((function(t){var n=t.data;e.setState({loading:!1,photoList:n})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.photoList,r=t.openedPhoto;return o.a.createElement(o.a.Fragment,null,o.a.createElement("header",{className:"header"},"\u0424\u043e\u0442\u043e\u0430\u043b\u044c\u0431\u043e\u043c"),o.a.createElement("main",{className:"gallery"},n?o.a.createElement(h,null):a.map((function(t){var n=t.id,a=t.url;return o.a.createElement(p,{key:n,id:n,url:a,openPhoto:e.openPhoto})}))),o.a.createElement("footer",{className:"footer"},"\xa9 2020"),r?o.a.createElement(k,{photo:r,closeModal:this.closePhoto,updateComments:this.openPhoto}):null)}}]),t}(a.Component);c.a.render(o.a.createElement(j,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.c2d59a15.chunk.js.map